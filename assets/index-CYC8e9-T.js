const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LoginView-BmrHxanm.js","assets/vue-vendor-R8HMg95E.js","assets/ThemeToggle-CIl26c0h.js","assets/ThemeToggle-N1KUdTAS.css","assets/element-plus-T7eq0npu.js","assets/vendor-DTV-MYIR.js","assets/element-plus-DRCl9NZC.css","assets/LoginView-tn0RQdqM.css","assets/UserLoginView-BRfopRe8.js","assets/UserDashboardView-Bhmgdmdj.js","assets/ConfirmModal-CMsnE2uZ.js","assets/ConfirmModal-BvCtxUSJ.css","assets/TutorialView-46V8zUUx.js","assets/TutorialView-BXJ9joBK.css","assets/UserManagementView-q3UU25N8.js","assets/MainLayout-3CeOOgVC.js","assets/LogoTitle-CX_-AgWK.js","assets/LogoTitle-BSU4aR5m.css","assets/MainLayout-D8J4oQOz.css","assets/DashboardView-DOz0CTGj.js","assets/chart-qI8C9904.js","assets/DashboardView-uI1e9PhB.css","assets/index-D0ikQ6DQ.js","assets/WindowCountdown-DF7xS2EZ.js","assets/index-DjBHccPZ.css","assets/index-CztcqWyX.js","assets/index-DtgW4tp6.css","assets/index-bIbt7COa.js","assets/index-DnFl18gP.css","assets/index-D_ZIKKT0.js","assets/index-BfzLvsgO.css"])))=>i.map(i=>d[i]);
import{aP as K,aQ as te,aR as se,r as p,c as L,o as J,q as H,V as F,I as G,z as g,x as b,ac as oe,Q as ae,a5 as W,y as T,C as M,L as O,P as x,Y as Q,B as re,R as C,J as ne,T as ie,O as ce,av as le,aM as ue,aS as de}from"./vue-vendor-R8HMg95E.js";import{i as he,z as me}from"./element-plus-T7eq0npu.js";import{P as _}from"./vendor-DTV-MYIR.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();const fe="modulepreload",ge=function(t){return"/admin-next/"+t},B={},y=function(e,s,o){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),c=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));a=Promise.allSettled(s.map(l=>{if(l=ge(l),l in B)return;B[l]=!0;const d=l.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const i=document.createElement("link");if(i.rel=d?"stylesheet":fe,d||(i.as="script"),i.crossOrigin="",i.href=l,c&&i.setAttribute("nonce",c),document.head.appendChild(i),d)return new Promise((u,m)=>{i.addEventListener("load",u),i.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(n){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n}return a.then(n=>{for(const c of n||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})};let I=null,pe=0;function X(t,e="info",s="",o=3e3){I||(I=document.createElement("div"),I.id="toast-container",I.style.cssText="position: fixed; top: 20px; right: 20px; z-index: 10000;",document.body.appendChild(I));const a=++pe,r=document.createElement("div");r.className=`toast rounded-2xl p-4 shadow-2xl backdrop-blur-sm toast-${e}`,r.style.cssText=`
    position: relative;
    min-width: 320px;
    max-width: 500px;
    margin-bottom: 16px;
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out;
  `;const n={success:"fas fa-check-circle",error:"fas fa-times-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"},c=t.replace(/\n/g,"<br>");return r.innerHTML=`
    <div class="flex items-start gap-3">
      <div class="flex-shrink-0 mt-0.5">
        <i class="${n[e]} text-lg"></i>
      </div>
      <div class="flex-1 min-w-0">
        ${s?`<h4 class="font-semibold text-sm mb-1">${s}</h4>`:""}
        <p class="text-sm opacity-90 leading-relaxed">${c}</p>
      </div>
      <button onclick="this.parentElement.parentElement.remove()" 
              class="flex-shrink-0 text-white/70 hover:text-white transition-colors ml-2">
        <i class="fas fa-times"></i>
      </button>
    </div>
  `,I.appendChild(r),setTimeout(()=>{r.style.transform="translateX(0)"},10),o>0&&setTimeout(()=>{r.style.transform="translateX(100%)",setTimeout(()=>{r.remove()},300)},o),a}const ve=Object.freeze(Object.defineProperty({__proto__:null,showToast:X},Symbol.toStringTag,{value:"Module"})),D={basePath:"/admin-next/",apiPrefix:""};function ye(t=""){return t&&!t.startsWith("/")&&(t="/"+t),D.basePath+(t.startsWith("#")?t:"#"+t)}function _e(){return ye("/login")}const j=D.apiPrefix;function P(t){return t.startsWith("/")||(t="/"+t),j+t}class we{constructor(){this.baseURL=j}getAuthToken(){const e=sessionStorage.getItem("authToken");return e||localStorage.getItem("authToken")||null}buildConfig(e={}){const s={headers:{"Content-Type":"application/json",...e.headers},...e},o=this.getAuthToken();return o&&(s.headers.Authorization=`Bearer ${o}`),s}async handleResponse(e){if(e.status===401){const o=window.location.pathname+window.location.hash;if(!(o.includes("/login")||o.endsWith("/"))){try{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken")}catch(r){console.log(r)}window.location.href=_e()}throw new Error("Unauthorized")}const s=e.headers.get("content-type");if(s&&s.includes("application/json")){const o=await e.json();if(!e.ok){const a=new Error(o.message||`HTTP ${e.status}`);throw a.response={status:e.status,data:o},a.message=o.message||a.message,a}return o}if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return e}async get(e,s={}){let o=P(e);if(s.params){const c=new URLSearchParams(s.params);o+="?"+c.toString()}const{params:a,...r}=s,n=this.buildConfig({...r,method:"GET"});try{const c=await fetch(o,n);return await this.handleResponse(c)}catch(c){throw console.error("API GET Error:",c),c}}async post(e,s=null,o={}){const a=P(e),r=this.buildConfig({...o,method:"POST",body:s?JSON.stringify(s):void 0});try{const n=await fetch(a,r);return await this.handleResponse(n)}catch(n){throw console.error("API POST Error:",n),n}}async put(e,s=null,o={}){const a=P(e),r=this.buildConfig({...o,method:"PUT",body:s?JSON.stringify(s):void 0});try{const n=await fetch(a,r);return await this.handleResponse(n)}catch(n){throw console.error("API PUT Error:",n),n}}async patch(e,s=null,o={}){const a=P(e),r=this.buildConfig({...o,method:"PATCH",body:s?JSON.stringify(s):void 0});try{const n=await fetch(a,r);return await this.handleResponse(n)}catch(n){throw console.error("API PATCH Error:",n),n}}async delete(e,s={}){const o=P(e),{data:a,...r}=s,n=this.buildConfig({...r,method:"DELETE",body:a?JSON.stringify(a):void 0});try{const c=await fetch(o,n);return await this.handleResponse(c)}catch(c){throw console.error("API DELETE Error:",c),c}}}const q=new we,k=`${j}/users`,Y=K("user",{state:()=>({user:null,isAuthenticated:!1,sessionToken:null,loading:!1,config:null}),getters:{isLoggedIn:t=>t.isAuthenticated&&t.user,userName:t=>{var e,s;return((e=t.user)==null?void 0:e.displayName)||((s=t.user)==null?void 0:s.username)},userRole:t=>{var e;return(e=t.user)==null?void 0:e.role}},actions:{async login(t,e={}){const{remember:s=!1}=e;this.loading=!0;try{const{username:o,password:a}=t||{},r=await _.post(`${k}/login`,{username:o,password:a});if(r.data.success){this.user=r.data.user,this.sessionToken=r.data.sessionToken,this.isAuthenticated=!0;try{localStorage.removeItem("userToken"),localStorage.removeItem("userData"),localStorage.removeItem("userConfig"),sessionStorage.removeItem("userToken"),sessionStorage.removeItem("userData"),sessionStorage.removeItem("userConfig")}catch(n){console.debug("User storage cleanup skipped:",n)}try{const n=s?localStorage:sessionStorage;n.setItem("userToken",this.sessionToken),n.setItem("userData",JSON.stringify(this.user))}catch(n){console.debug("User storage write skipped:",n)}return this.setAuthHeader(),r.data}else throw new Error(r.data.message||"Login failed")}catch(o){throw this.clearAuth(),o}finally{this.loading=!1}},async logout(){try{this.sessionToken&&await _.post(`${k}/logout`,{},{headers:{"x-user-token":this.sessionToken}})}catch(t){console.error("Logout request failed:",t)}finally{this.clearAuth()}},async checkAuth(){const t=sessionStorage.getItem("userToken")||localStorage.getItem("userToken"),e=sessionStorage.getItem("userData")||localStorage.getItem("userData"),s=sessionStorage.getItem("userConfig")||localStorage.getItem("userConfig");if(!t||!e)return this.clearAuth(),!1;try{return this.sessionToken=t,this.user=JSON.parse(e),this.config=s?JSON.parse(s):null,this.isAuthenticated=!0,this.setAuthHeader(),await this.getUserProfile(),!0}catch(o){return console.error("Auth check failed:",o),this.clearAuth(),!1}},async getUserProfile(){var t,e,s,o;try{const a=await _.get(`${k}/profile`);if(a.data.success){this.user=a.data.user,this.config=a.data.config;const r=sessionStorage.getItem("userToken")?sessionStorage:localStorage;return r.setItem("userData",JSON.stringify(this.user)),r.setItem("userConfig",JSON.stringify(this.config)),a.data.user}}catch(a){throw(((t=a.response)==null?void 0:t.status)===401||((e=a.response)==null?void 0:e.status)===403)&&(this.clearAuth(),((s=a.response)==null?void 0:s.status)===403)?new Error(((o=a.response.data)==null?void 0:o.message)||"Your account has been disabled"):a}},async getUserApiKeys(t=!1){try{const e={};t&&(e.includeDeleted="true");const s=await _.get(`${k}/api-keys`,{params:e});return s.data.success?s.data.apiKeys:[]}catch(e){throw console.error("Failed to fetch API keys:",e),e}},async createApiKey(t){try{return(await _.post(`${k}/api-keys`,t)).data}catch(e){throw console.error("Failed to create API key:",e),e}},async deleteApiKey(t){try{return(await _.delete(`${k}/api-keys/${t}`)).data}catch(e){throw console.error("Failed to delete API key:",e),e}},async getUserUsageStats(t={}){try{const e=await _.get(`${k}/usage-stats`,{params:t});return e.data.success?e.data.stats:null}catch(e){throw console.error("Failed to fetch usage stats:",e),e}},clearAuth(){this.user=null,this.sessionToken=null,this.isAuthenticated=!1,this.config=null;try{localStorage.removeItem("userToken"),localStorage.removeItem("userData"),localStorage.removeItem("userConfig"),sessionStorage.removeItem("userToken"),sessionStorage.removeItem("userData"),sessionStorage.removeItem("userConfig")}catch(t){console.debug("User storage remove failed:",t)}delete _.defaults.headers.common["x-user-token"]},setAuthHeader(){this.sessionToken&&(_.defaults.headers.common["x-user-token"]=this.sessionToken)},setupAxiosInterceptors(){_.interceptors.response.use(t=>t,t=>{var e,s;if(((e=t.response)==null?void 0:e.status)===403){const o=(s=t.response.data)==null?void 0:s.message;o&&(o.includes("disabled")||o.includes("Account disabled"))&&(this.clearAuth(),X(o,"error"),window.location.pathname!=="/user-login"&&(window.location.href="/user-login"))}return Promise.reject(t)})}}}),Te=()=>y(()=>import("./LoginView-BmrHxanm.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),Ae=()=>y(()=>import("./UserLoginView-BRfopRe8.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])),ke=()=>y(()=>import("./UserDashboardView-Bhmgdmdj.js"),__vite__mapDeps([9,1,2,3,10,11,12,4,5,6,13,7])),be=()=>y(()=>import("./UserManagementView-q3UU25N8.js"),__vite__mapDeps([14,1,10,11,5,4,6,7])),S=()=>y(()=>import("./MainLayout-3CeOOgVC.js"),__vite__mapDeps([15,1,16,17,2,3,4,5,6,18])),Ie=()=>y(()=>import("./DashboardView-DOz0CTGj.js"),__vite__mapDeps([19,4,1,5,6,20,21])),Se=()=>y(()=>import("./index-D0ikQ6DQ.js"),__vite__mapDeps([22,4,1,5,6,23,24])),xe=()=>y(()=>import("./index-CztcqWyX.js"),__vite__mapDeps([25,4,1,5,6,10,11,20,26])),Ee=()=>y(()=>import("./TutorialView-46V8zUUx.js"),__vite__mapDeps([12,1,4,5,6,13])),Pe=()=>y(()=>import("./index-bIbt7COa.js"),__vite__mapDeps([27,4,1,5,6,28])),Le=()=>y(()=>import("./index-D_ZIKKT0.js"),__vite__mapDeps([29,1,16,17,2,3,5,23,12,4,6,13,30])),Ce=[{path:"/",redirect:()=>{const t=window.location.pathname,e=D.basePath.replace(/\/$/,"");return t===e||t===e+"/","/api-stats"}},{path:"/login",name:"Login",component:Te,meta:{requiresAuth:!1}},{path:"/admin-login",redirect:"/login"},{path:"/user-login",name:"UserLogin",component:Ae,meta:{requiresAuth:!1,userAuth:!0}},{path:"/user-dashboard",name:"UserDashboard",component:ke,meta:{requiresUserAuth:!0}},{path:"/api-stats",name:"ApiStats",component:Le,meta:{requiresAuth:!1}},{path:"/dashboard",component:S,meta:{requiresAuth:!0},children:[{path:"",name:"Dashboard",component:Ie}]},{path:"/api-keys",component:S,meta:{requiresAuth:!0},children:[{path:"",name:"ApiKeys",component:Se}]},{path:"/accounts",component:S,meta:{requiresAuth:!0},children:[{path:"",name:"Accounts",component:xe}]},{path:"/tutorial",component:S,meta:{requiresAuth:!0},children:[{path:"",name:"Tutorial",component:Ee}]},{path:"/settings",component:S,meta:{requiresAuth:!0},children:[{path:"",name:"Settings",component:Pe}]},{path:"/user-management",component:S,meta:{requiresAuth:!0},children:[{path:"",name:"UserManagement",component:be}]},{path:"/:pathMatch(.*)*",redirect:"/api-stats"}],U=te({history:se(D.basePath),routes:Ce});U.beforeEach(async(t,e,s)=>{const o=Z(),a=Y();if(console.log("路由导航:",{to:t.path,from:e.path,fullPath:t.fullPath,requiresAuth:t.meta.requiresAuth,requiresUserAuth:t.meta.requiresUserAuth,isAuthenticated:o.isAuthenticated,isUserAuthenticated:a.isAuthenticated}),t.path===e.path&&t.fullPath===e.fullPath)return s();if(t.meta.requiresUserAuth){if(!a.isAuthenticated)try{if(!await a.checkAuth())return s("/user-login")}catch(r){if(r.message&&r.message.includes("disabled")){const{showToast:n}=await y(async()=>{const{showToast:c}=await Promise.resolve().then(()=>ve);return{showToast:c}},void 0);n(r.message,"error")}return s("/user-login")}return s()}t.path==="/api-stats"||t.path.startsWith("/api-stats")?s():t.path==="/user-login"?a.isAuthenticated?s("/user-dashboard"):s():t.meta.requiresAuth&&!o.isAuthenticated?s("/login"):t.path==="/login"&&o.isAuthenticated?s("/dashboard"):s()});const Z=K("auth",()=>{const t=p(!1),e=p(typeof sessionStorage<"u"&&sessionStorage.getItem("authToken")||typeof localStorage<"u"&&localStorage.getItem("authToken")||""),s=p(""),o=p(""),a=p(!1),r=p({siteName:"AI Relay Service",siteIcon:"",siteIconData:"",faviconData:"",copyInfoTemplate:"",tutorialUrl:""}),n=p(!0),c=L(()=>!!e.value&&t.value),l=L(()=>e.value),d=L(()=>({username:s.value}));async function f(h,A={}){const{remember:$=!1}=A;a.value=!0,o.value="";try{const{username:V,password:ee}=h||{},E=await q.post("/web/auth/login",{username:V,password:ee});if(E.success){e.value=E.token,s.value=E.username||h.username,t.value=!0;try{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken")}catch(N){console.debug("Auth storage cleanup skipped:",N)}try{($?localStorage:sessionStorage).setItem("authToken",E.token)}catch{}await U.push("/dashboard")}else o.value=E.message||"登录失败"}catch(V){o.value=V.message||"登录失败，请检查用户名和密码"}finally{a.value=!1}}function i(){t.value=!1,e.value="",s.value="";try{localStorage.removeItem("authToken"),sessionStorage.removeItem("authToken")}catch(h){console.debug("Auth storage remove failed:",h)}U.push("/login")}function u(){e.value&&(t.value=!0,m())}async function m(){try{const h=await q.get("/web/auth/user");h.success&&h.user?s.value=h.user.username:i()}catch{i()}}async function w(){n.value=!0;try{const h=await q.get("/admin/oem-settings");if(h.success&&h.data){if(r.value={...r.value,...h.data},h.data.siteIconData||h.data.siteIcon){const A=document.querySelector("link[rel*='icon']")||document.createElement("link");A.type="image/x-icon",A.rel="shortcut icon",A.href=h.data.siteIconData||h.data.siteIcon,document.getElementsByTagName("head")[0].appendChild(A)}h.data.siteName&&(document.title=`${h.data.siteName} - 管理后台`)}}catch(h){console.error("加载OEM设置失败:",h)}finally{n.value=!1}}return{isLoggedIn:t,authToken:e,username:s,loginError:o,loginLoading:a,oemSettings:r,oemLoading:n,isAuthenticated:c,token:l,user:d,login:f,logout:i,checkAuth:u,loadOemSettings:w}}),v={LIGHT:"light",DARK:"dark",AUTO:"auto"},Oe=K("theme",()=>{const t=p(v.AUTO),e=p(!1),s=L(()=>t.value===v.DARK?!0:t.value===v.LIGHT?!1:e.value),o=L(()=>s.value?v.DARK:v.LIGHT),a=()=>{const i=window.matchMedia("(prefers-color-scheme: dark)");e.value=i.matches;const u=localStorage.getItem("themeMode");u&&Object.values(v).includes(u)?t.value=u:t.value=v.AUTO,r(),l()},r=()=>{const i=document.documentElement;s.value?i.classList.add("dark"):i.classList.remove("dark")},n=i=>{Object.values(v).includes(i)&&(t.value=i)},c=()=>{const i=[v.LIGHT,v.DARK,v.AUTO],m=(i.indexOf(t.value)+1)%i.length;t.value=i[m]};J(t,i=>{localStorage.setItem("themeMode",i),r()}),J(e,()=>{t.value===v.AUTO&&r()});const l=()=>{const i=window.matchMedia("(prefers-color-scheme: dark)"),u=m=>{e.value=m.matches};return e.value=i.matches,i.addEventListener("change",u),()=>{i.removeEventListener("change",u)}};return{themeMode:t,isDarkMode:s,currentTheme:o,systemPrefersDark:e,ThemeMode:v,initTheme:a,setThemeMode:n,cycleThemeMode:c,watchSystemTheme:l,toggleTheme:()=>{c()},setTheme:i=>{i==="dark"?n(v.DARK):i==="light"&&n(v.LIGHT)}}}),z=(t,e)=>{const s=t.__vccOpts||t;for(const[o,a]of e)s[o]=a;return s},Ue={class:"toast-container"},De=["onClick"],Re={class:"toast-content"},$e={class:"toast-icon"},Ve={class:"toast-body"},Ne={key:0,class:"toast-title"},qe={class:"toast-message"},Me=["onClick"],Ke={__name:"ToastNotification",setup(t,{expose:e}){const s=p([]);let o=0;const a=d=>{const f={success:"fas fa-check-circle",error:"fas fa-exclamation-circle",warning:"fas fa-exclamation-triangle",info:"fas fa-info-circle"};return f[d]||f.info},r=(d,f="info",i=null,u=5e3)=>{const m=++o,w={id:m,message:d,type:f,title:i,duration:u,isVisible:!1};return s.value.push(w),setTimeout(()=>{w.isVisible=!0},10),u>0&&setTimeout(()=>{n(m)},u),m},n=d=>{const f=s.value.findIndex(i=>i.id===d);if(f>-1){const i=s.value[f];i.isVisible=!1,setTimeout(()=>{const u=s.value.findIndex(m=>m.id===d);u>-1&&s.value.splice(u,1)},300)}},c=()=>{s.value.forEach(d=>{d.isVisible=!1}),setTimeout(()=>{s.value.length=0},300)},l=(d,f="info",i=null,u=5e3)=>r(d,f,i,u);return H(()=>{window.showToast=l}),F(()=>{window.showToast===l&&delete window.showToast}),e({showToast:l,removeToast:n,clearAllToasts:c}),(d,f)=>(T(),G(W,{to:"body"},[g("div",Ue,[(T(!0),b(ae,null,oe(s.value,i=>(T(),b("div",{key:i.id,class:M(["toast",`toast-${i.type}`,i.isVisible?"toast-show":"toast-hide"]),onClick:u=>n(i.id)},[g("div",Re,[g("div",$e,[g("i",{class:M(a(i.type))},null,2)]),g("div",Ve,[i.title?(T(),b("div",Ne,x(i.title),1)):O("",!0),g("div",qe,x(i.message),1)]),g("button",{class:"toast-close",onClick:Q(u=>n(i.id),["stop"])},f[0]||(f[0]=[g("i",{class:"fas fa-times"},null,-1)]),8,Me)]),i.duration>0?(T(),b("div",{key:0,class:"toast-progress",style:re({animationDuration:`${i.duration}ms`})},null,4)):O("",!0)],10,De))),128))])]))}},He=z(Ke,[["__scopeId","data-v-c8b24ff5"]]),je={class:"modal-content mx-auto w-full max-w-md p-6"},ze={class:"mb-6 flex items-start gap-4"},Je={class:"flex-1"},Be={class:"mb-2 text-lg font-semibold text-gray-900 dark:text-white"},Fe={class:"whitespace-pre-line leading-relaxed text-gray-700 dark:text-gray-400"},Ge={class:"flex items-center justify-end gap-3"},We=["disabled"],Qe=["disabled"],Xe={key:0,class:"loading-spinner mr-2"},Ye={__name:"ConfirmDialog",setup(t,{expose:e}){const s=p(!1),o=p(!1),a=p(""),r=p(""),n=p("确认"),c=p("取消");let l=null;const d=(m,w,h="确认",A="取消")=>new Promise($=>{a.value=m,r.value=w,n.value=h,c.value=A,s.value=!0,o.value=!1,l=$}),f=()=>{o.value||(o.value=!0,setTimeout(()=>{s.value=!1,o.value=!1,l&&(l(!0),l=null)},200))},i=()=>{o.value||(s.value=!1,l&&(l(!1),l=null))},u=m=>{s.value&&(m.key==="Escape"?i():m.key==="Enter"&&!m.shiftKey&&!m.ctrlKey&&!m.altKey&&f())};return H(()=>{window.showConfirm=d,document.addEventListener("keydown",u)}),F(()=>{window.showConfirm===d&&delete window.showConfirm,document.removeEventListener("keydown",u)}),e({showConfirm:d}),(m,w)=>(T(),G(W,{to:"body"},[C(ie,{appear:"",name:"modal"},{default:ne(()=>[s.value?(T(),b("div",{key:0,class:"modal fixed inset-0 z-[100] flex items-center justify-center p-4",onClick:Q(i,["self"])},[g("div",je,[g("div",ze,[w[0]||(w[0]=g("div",{class:"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-amber-500 to-amber-600"},[g("i",{class:"fas fa-exclamation-triangle text-lg text-white"})],-1)),g("div",Je,[g("h3",Be,x(a.value),1),g("div",Fe,x(r.value),1)])]),g("div",Ge,[g("button",{class:"btn bg-gray-100 px-6 py-3 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",disabled:o.value,onClick:i},x(c.value),9,We),g("button",{class:M(["btn btn-warning px-6 py-3",{"cursor-not-allowed opacity-50":o.value}]),disabled:o.value,onClick:f},[o.value?(T(),b("div",Xe)):O("",!0),ce(" "+x(n.value),1)],10,Qe)])])])):O("",!0)]),_:1})]))}},Ze=z(Ye,[["__scopeId","data-v-6b3390a6"]]),et={id:"app"},tt={__name:"App",setup(t){const e=Z(),s=Oe(),o=p(),a=p();return H(()=>{s.initTheme(),s.watchSystemTheme(),e.checkAuth(),e.loadOemSettings()}),(r,n)=>{const c=le("router-view");return T(),b("div",et,[C(c),C(He,{ref_key:"toastRef",ref:o},null,512),C(Ze,{ref_key:"confirmRef",ref:a},null,512)])}}},st=z(tt,[["__scopeId","data-v-dab04b7e"]]),R=ue(st),ot=de();R.use(ot);R.use(U);R.use(he,{locale:me});const at=Y();at.setupAxiosInterceptors();R.mount("#app");export{z as _,Oe as a,Y as b,q as c,X as s,Z as u};
